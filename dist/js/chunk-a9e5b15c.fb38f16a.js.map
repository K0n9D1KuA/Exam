{"version":3,"sources":["webpack:///./views/authority/controlAuthority.vue?356a","webpack:///views/authority/controlAuthority.vue","webpack:///./views/authority/controlAuthority.vue?559d","webpack:///./views/authority/controlAuthority.vue?9186","webpack:///./views/authority/controlAuthority.vue?06a4"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","dialogVisible","on","$event","directives","name","rawName","value","expression","staticStyle","authority","scopedSlots","_u","key","fn","scope","row","hasOrNotHas","deliverAuthorityToOneRole","id","_v","removeAuth","staticClass","slot","menuList","defaultProps","handleNodeClick","ref","node","data","_s","label","level","append","_e","childNodes","length","remove","labelPosition","formLabelAlign","model","menu","callback","$$v","$set","owner","newMenu","menuLevel","parentId","_l","item","addNewMenu","roleList","deliverAuthority","deleteHandle","staticRenderFns","components","token","dataListLoading","children","region","type","menuLevelOneList","roleId","undefined","computed","watch","methods","removeAuthority","menuId","$http","getAuthority","addOneMenu","addTwoMenu","getRoleList","getMenuInfo","getDataList","created","$store","state","user","mounted","beforeCreate","beforeMount","beforeUpdate","updated","beforeDestroy","destroyed","activated","component"],"mappings":"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","file":"js/chunk-a9e5b15c.fb38f16a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('el-dialog',{attrs:{\"title\":\"分配权限\",\"visible\":_vm.dialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.dataListLoading),expression:\"dataListLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.authority,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"label\",\"header-align\":\"center\",\"align\":\"center\",\"label\":\"菜单名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"menuDescription\",\"header-align\":\"center\",\"align\":\"center\",\"label\":\"菜单功能\"}}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"header-align\":\"center\",\"align\":\"center\",\"width\":\"150\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\",\"disabled\":scope.row.hasOrNotHas},on:{\"click\":function($event){return _vm.deliverAuthorityToOneRole(scope.row.id)}}},[_vm._v(\"分配权限\")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\",\"disabled\":!scope.row.hasOrNotHas},on:{\"click\":function($event){return _vm.removeAuth(scope.row.id)}}},[_vm._v(\"移除权限\")])]}}])})],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"确 定\")])],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":4}},[_c('div',{staticClass:\"grid-content bg-purple\"},[_c('el-tree',{attrs:{\"data\":_vm.menuList,\"props\":_vm.defaultProps,\"node-key\":\"id\"},on:{\"node-click\":_vm.handleNodeClick},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(node.label))]),_c('span',[(node.level < 1)?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.append(data); }}},[_vm._v(\" 添加 \")]):_vm._e(),(node.childNodes.length == 0)?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.remove(node, data); }}},[_vm._v(\" 删除 \")]):_vm._e()],1)])}}])})],1)]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"grid-content bg-purple-light\"},[_c('div',{staticClass:\"menu-info\"},[_c('el-form',{attrs:{\"label-position\":_vm.labelPosition,\"label-width\":\"80px\",\"model\":_vm.formLabelAlign}},[_c('el-form-item',{attrs:{\"label\":\"菜单名称\"}},[_c('el-input',{model:{value:(_vm.menu.label),callback:function ($$v) {_vm.$set(_vm.menu, \"label\", $$v)},expression:\"menu.label\"}})],1),_c('el-form-item',{attrs:{\"label\":\"菜单路径\"}},[_c('el-input',{model:{value:(_vm.menu.url),callback:function ($$v) {_vm.$set(_vm.menu, \"url\", $$v)},expression:\"menu.url\"}})],1),_c('el-form-item',{attrs:{\"label\":\"菜单功能\"}},[_c('el-input',{model:{value:(_vm.menu.menuDescription),callback:function ($$v) {_vm.$set(_vm.menu, \"menuDescription\", $$v)},expression:\"menu.menuDescription\"}})],1),_c('div',{staticClass:\"role\"},[_vm._v(\"权限拥有者:\"+_vm._s(_vm.menu.owner))])],1)],1)])]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"grid-content bg-purple-light\"},[_c('div',{staticClass:\"menu-info\"},[_c('el-form',{attrs:{\"label-position\":_vm.labelPosition,\"label-width\":\"80px\",\"model\":_vm.formLabelAlign}},[_c('el-form-item',{attrs:{\"label\":\"菜单名称\"}},[_c('el-input',{model:{value:(_vm.newMenu.label),callback:function ($$v) {_vm.$set(_vm.newMenu, \"label\", $$v)},expression:\"newMenu.label\"}})],1),_c('el-form-item',{attrs:{\"label\":\"菜单路径\"}},[_c('el-input',{model:{value:(_vm.newMenu.path),callback:function ($$v) {_vm.$set(_vm.newMenu, \"path\", $$v)},expression:\"newMenu.path\"}})],1),_c('el-form-item',{attrs:{\"label\":\"菜单层级\"}},[_c('el-radio',{attrs:{\"label\":1},model:{value:(_vm.menuLevel),callback:function ($$v) {_vm.menuLevel=$$v},expression:\"menuLevel\"}},[_vm._v(\"一级菜单\")]),_c('el-radio',{attrs:{\"label\":2},model:{value:(_vm.menuLevel),callback:function ($$v) {_vm.menuLevel=$$v},expression:\"menuLevel\"}},[_vm._v(\"二级菜单\")])],1),(_vm.menuLevel == 2)?_c('el-form-item',{attrs:{\"label\":\"菜单功能\"}},[_c('el-input',{model:{value:(_vm.newMenu.menuDescription),callback:function ($$v) {_vm.$set(_vm.newMenu, \"menuDescription\", $$v)},expression:\"newMenu.menuDescription\"}})],1):_vm._e(),(_vm.menuLevel == 2)?_c('el-form-item',{attrs:{\"label\":\"一级菜单\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.parentId),callback:function ($$v) {_vm.parentId=$$v},expression:\"parentId\"}},_vm._l((_vm.menuLevelOneList),function(item){return _c('el-option',{key:item.label,attrs:{\"label\":item.label,\"value\":item.id}})}),1)],1):_vm._e(),_c('div',{staticClass:\"button\"},[_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.addNewMenu()}}},[_vm._v(\"新增菜单\")])],1)],1)],1)])]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"grid-content\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.dataListLoading),expression:\"dataListLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.roleList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"role\",\"header-align\":\"center\",\"align\":\"center\",\"label\":\"角色名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleDescription\",\"header-align\":\"center\",\"align\":\"center\",\"label\":\"角色名称\"}}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"header-align\":\"center\",\"align\":\"center\",\"width\":\"150\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.deliverAuthority(scope.row.id)}}},[_vm._v(\"分配权限\")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.deleteHandle(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1)],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--  -->\r\n<template>\r\n  <div class=\"\">\r\n    <el-dialog title=\"分配权限\" :visible.sync=\"dialogVisible\" width=\"30%\">\r\n      <el-table\r\n        :data=\"authority\"\r\n        border\r\n        v-loading=\"dataListLoading\"\r\n        style=\"width: 100%\"\r\n      >\r\n        <el-table-column\r\n          prop=\"label\"\r\n          header-align=\"center\"\r\n          align=\"center\"\r\n          label=\"菜单名称\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"menuDescription\"\r\n          header-align=\"center\"\r\n          align=\"center\"\r\n          label=\"菜单功能\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          fixed=\"right\"\r\n          header-align=\"center\"\r\n          align=\"center\"\r\n          width=\"150\"\r\n          label=\"操作\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"deliverAuthorityToOneRole(scope.row.id)\"\r\n              :disabled=\"scope.row.hasOrNotHas\"\r\n              >分配权限</el-button\r\n            >\r\n            <el-button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"removeAuth(scope.row.id)\"\r\n              :disabled=\"!scope.row.hasOrNotHas\"\r\n              >移除权限</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogVisible = false\"\r\n          >确 定</el-button\r\n        >\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <el-row>\r\n      <el-col :span=\"4\"\r\n        ><div class=\"grid-content bg-purple\">\r\n          <el-tree\r\n            :data=\"menuList\"\r\n            :props=\"defaultProps\"\r\n            node-key=\"id\"\r\n            @node-click=\"handleNodeClick\"\r\n          >\r\n            <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n              <span>{{ node.label }}</span>\r\n              <span>\r\n                <el-button\r\n                  v-if=\"node.level < 1\"\r\n                  type=\"text\"\r\n                  size=\"mini\"\r\n                  @click=\"() => append(data)\"\r\n                >\r\n                  添加\r\n                </el-button>\r\n                <el-button\r\n                  v-if=\"node.childNodes.length == 0\"\r\n                  type=\"text\"\r\n                  size=\"mini\"\r\n                  @click=\"() => remove(node, data)\"\r\n                >\r\n                  删除\r\n                </el-button>\r\n              </span>\r\n            </span></el-tree\r\n          >\r\n        </div></el-col\r\n      >\r\n      <el-col :span=\"6\"\r\n        ><div class=\"grid-content bg-purple-light\">\r\n          <div class=\"menu-info\">\r\n            <el-form\r\n              :label-position=\"labelPosition\"\r\n              label-width=\"80px\"\r\n              :model=\"formLabelAlign\"\r\n            >\r\n              <el-form-item label=\"菜单名称\">\r\n                <el-input v-model=\"menu.label\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"菜单路径\">\r\n                <el-input v-model=\"menu.url\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"菜单功能\">\r\n                <el-input v-model=\"menu.menuDescription\"></el-input>\r\n              </el-form-item>\r\n              <div class=\"role\">权限拥有者:{{ menu.owner }}</div>\r\n            </el-form>\r\n          </div>\r\n        </div></el-col\r\n      >\r\n      <el-col :span=\"6\"\r\n        ><div class=\"grid-content bg-purple-light\">\r\n          <div class=\"menu-info\">\r\n            <el-form\r\n              :label-position=\"labelPosition\"\r\n              label-width=\"80px\"\r\n              :model=\"formLabelAlign\"\r\n            >\r\n              <el-form-item label=\"菜单名称\">\r\n                <el-input v-model=\"newMenu.label\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"菜单路径\">\r\n                <el-input v-model=\"newMenu.path\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"菜单层级\">\r\n                <el-radio v-model=\"menuLevel\" :label=\"1\">一级菜单</el-radio>\r\n                <el-radio v-model=\"menuLevel\" :label=\"2\">二级菜单</el-radio>\r\n              </el-form-item>\r\n              <el-form-item label=\"菜单功能\" v-if=\"menuLevel == 2\">\r\n                <el-input v-model=\"newMenu.menuDescription\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"一级菜单\" v-if=\"menuLevel == 2\">\r\n                <el-select v-model=\"parentId\" placeholder=\"请选择\">\r\n                  <el-option\r\n                    v-for=\"item in menuLevelOneList\"\r\n                    :key=\"item.label\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.id\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n              <div class=\"button\">\r\n                <el-button type=\"success\" @click=\"addNewMenu()\"\r\n                  >新增菜单</el-button\r\n                >\r\n              </div>\r\n            </el-form>\r\n          </div>\r\n        </div></el-col\r\n      >\r\n      <el-col :span=\"6\"\r\n        ><div class=\"grid-content\">\r\n          <el-table\r\n            :data=\"roleList\"\r\n            border\r\n            v-loading=\"dataListLoading\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-table-column\r\n              prop=\"role\"\r\n              header-align=\"center\"\r\n              align=\"center\"\r\n              label=\"角色名称\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"roleDescription\"\r\n              header-align=\"center\"\r\n              align=\"center\"\r\n              label=\"角色名称\"\r\n            >\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n              fixed=\"right\"\r\n              header-align=\"center\"\r\n              align=\"center\"\r\n              width=\"150\"\r\n              label=\"操作\"\r\n            >\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  type=\"text\"\r\n                  size=\"small\"\r\n                  @click=\"deliverAuthority(scope.row.id)\"\r\n                  >分配权限</el-button\r\n                >\r\n                <el-button\r\n                  type=\"text\"\r\n                  size=\"small\"\r\n                  @click=\"deleteHandle(scope.row.id)\"\r\n                  >删除</el-button\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div></el-col\r\n      >\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\r\n//例如：import 《组件名称》 from '《组件路径》';\r\n\r\nexport default {\r\n  //import引入的组件需要注入到对象中才能使用\r\n  components: {},\r\n  data() {\r\n    //这里存放数据\r\n    return {\r\n      token: \"\",\r\n      dataListLoading: false,\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\",\r\n      },\r\n      menuList: [],\r\n      menu: {},\r\n      labelPosition: \"left\",\r\n      formLabelAlign: {\r\n        name: \"\",\r\n        region: \"\",\r\n        type: \"\",\r\n      },\r\n      roleList: [],\r\n      menuLevel: 1,\r\n      menuLevelOneList: [],\r\n      parentId: 1,\r\n      newMenu: {},\r\n      authority: [],\r\n      dialogVisible: false,\r\n      roleId: undefined,\r\n    };\r\n  },\r\n  //监听属性 类似于data概念\r\n  computed: {},\r\n  //监控data中的数据变化\r\n  watch: {},\r\n  //方法集合\r\n  methods: {\r\n    removeAuth(menuId) {\r\n      this.removeAuthority(menuId);\r\n    },\r\n    //role/removeAuthorityToOneRole\r\n    removeAuthority(menuId) {\r\n      this.$http\r\n        .post(\r\n          \"role/removeAuthorityToOneRole\",\r\n          {\r\n            roleId: this.roleId,\r\n            menuId: menuId,\r\n          },\r\n          {\r\n            headers: {\r\n              token: this.token,\r\n            },\r\n          }\r\n        )\r\n        .then(({ data }) => {\r\n          if (data && data.code === 0) {\r\n            this.$message({\r\n              message: \"移除权限成功\",\r\n              type: \"success\",\r\n              duration: 1500,\r\n            });\r\n            this.getAuthority(this.roleId);\r\n          } else {\r\n            this.$message.error(data.msg);\r\n          }\r\n        });\r\n    },\r\n    //删除用户的权限\r\n    //给用户分配权限\r\n    //role/deliverAuthorityToOneRole\r\n    deliverAuthorityToOneRole(menuId) {\r\n      this.$http\r\n        .post(\r\n          \"role/deliverAuthorityToOneRole\",\r\n          {\r\n            roleId: this.roleId,\r\n            menuId: menuId,\r\n          },\r\n          {\r\n            headers: {\r\n              token: this.token,\r\n            },\r\n          }\r\n        )\r\n        .then(({ data }) => {\r\n          if (data && data.code === 0) {\r\n            this.$message({\r\n              message: \"分配权限成功成功\",\r\n              type: \"success\",\r\n              duration: 1500,\r\n            });\r\n            this.getAuthority(this.roleId);\r\n          } else {\r\n            this.$message.error(data.msg);\r\n          }\r\n        });\r\n    },\r\n    //打开弹窗\r\n    deliverAuthority(id) {\r\n      this.getAuthority(id);\r\n      this.dialogVisible = true;\r\n      this.roleId = id;\r\n    },\r\n    //获得所有权限\r\n    getAuthority(id) {\r\n      this.dataListLoading = true;\r\n      this.$http\r\n        .get(\"role/getAuthority/\" + id, {\r\n          headers: {\r\n            token: this.token,\r\n          },\r\n        })\r\n        .then(({ data }) => {\r\n          if (data && data.code === 0) {\r\n            this.authority = data.data;\r\n            console.log(\"authority\", this.authority);\r\n          } else {\r\n          }\r\n          this.dataListLoading = false;\r\n        });\r\n    },\r\n    addNewMenu() {\r\n      if (this.menuLevel == 1) {\r\n        //说明添加的是一级菜单\r\n        this.addOneMenu();\r\n      } else {\r\n        this.addTwoMenu();\r\n      }\r\n    },\r\n    //新增二级菜单\r\n    addTwoMenu() {\r\n      this.$http\r\n        .post(\r\n          \"menu/addTwoMenu\",\r\n          {\r\n            label: this.newMenu.label,\r\n            path: this.newMenu.path,\r\n            parentId: this.parentId,\r\n            menuDescription: this.newMenu.menuDescription,\r\n          },\r\n          {\r\n            headers: {\r\n              token: this.token,\r\n            },\r\n          }\r\n        )\r\n        .then(({ data }) => {\r\n          if (data && data.code === 0) {\r\n            this.$message({\r\n              message: \"添加菜单成功\",\r\n              type: \"success\",\r\n              duration: 1500,\r\n            });\r\n            this.getDataList();\r\n          } else {\r\n            this.$message.error(data.msg);\r\n          }\r\n        });\r\n    },\r\n    //新增一级菜单\r\n    addOneMenu() {\r\n      this.$http\r\n        .post(\r\n          \"menu/addOneMenu\",\r\n          {\r\n            label: this.newMenu.label,\r\n            path: this.newMenu.path,\r\n          },\r\n          {\r\n            headers: {\r\n              token: this.token,\r\n            },\r\n          }\r\n        )\r\n        .then(({ data }) => {\r\n          if (data && data.code === 0) {\r\n            this.$message({\r\n              message: \"添加菜单成功\",\r\n              type: \"success\",\r\n              duration: 1500,\r\n            });\r\n            this.getDataList();\r\n          } else {\r\n            this.$message.error(data.msg);\r\n          }\r\n        });\r\n    },\r\n    //role/getAllRoles\r\n    getRoleList() {\r\n      this.dataListLoading = true;\r\n      this.$http\r\n        .get(\"role/getAllRoles\", {\r\n          headers: {\r\n            token: this.token,\r\n          },\r\n        })\r\n        .then(({ data }) => {\r\n          if (data && data.code === 0) {\r\n            this.roleList = data.data;\r\n            //遍历处理身份\r\n            this.roleList.forEach((o) => {\r\n              if (o.role == \"student\") {\r\n                o.role = \"学生\";\r\n              }\r\n              if (o.role == \"teacher\") {\r\n                o.role = \"老师\";\r\n              }\r\n              if (o.role == \"admin\") {\r\n                o.role = \"管理员\";\r\n              }\r\n            });\r\n          } else {\r\n          }\r\n          this.dataListLoading = false;\r\n        });\r\n    },\r\n    //获得菜单信息\r\n    getMenuInfo(menuId) {\r\n      //menu/menuInfo/{{menuId}}\r\n\r\n      this.$http\r\n        .get(\"menu/menuInfo/\" + menuId, {\r\n          headers: {\r\n            token: this.token,\r\n          },\r\n        })\r\n        .then(({ data }) => {\r\n          if (data && data.code === 0) {\r\n            this.menu = data.data;\r\n          }\r\n        });\r\n    },\r\n    //删除选中分类\r\n    remove(node, data) {\r\n      //   var ids = [data.catId];\r\n      //   this.$confirm(`此操作将永久删除->${data.name}<-, 是否继续?`, \"提示\", {\r\n      //     confirmButtonText: \"确定\",\r\n      //     cancelButtonText: \"取消\",\r\n      //     type: \"warning\",\r\n      //   }).then(() => {\r\n      //     this.$http({\r\n      //       url: this.$http.adornUrl(\"/product/category/delete\"),\r\n      //       method: \"post\",\r\n      //       data: this.$http.adornData(ids, false),\r\n      //     }).then(({ data }) => {\r\n      //       this.$message({\r\n      //         message: \"删除分类成功\",\r\n      //         type: \"success\",\r\n      //       });\r\n      //       this.expandedKeys = [node.parent.data.catId];\r\n      //       this.getMnues();\r\n      //     });\r\n      //   });\r\n    },\r\n    append(data) {\r\n      //   this.title = \"添加分类\";\r\n      //   this.dialogType = \"add\";\r\n      //   this.dialogFormVisible = true;\r\n      //   this.category.parentCid = data.catId;\r\n      //   this.category.catLevel = data.catLevel + 1;\r\n    },\r\n    handleNodeClick(data, node) {\r\n      //   console.log(\"data\", data);\r\n      //   console.log(\"node\", data);\r\n      if (node.level == 2) {\r\n        this.getMenuInfo(data.id);\r\n      }\r\n    },\r\n    getDataList() {\r\n      this.dataListLoading = true;\r\n      this.$http\r\n        .get(\"menu/getTreeList\", {\r\n          headers: {\r\n            token: this.token,\r\n          },\r\n        })\r\n        .then(({ data }) => {\r\n          if (data && data.code === 0) {\r\n            console.log(data.data);\r\n            this.menuList = data.data;\r\n            this.menuLevelOneList = this.menuList.filter((o) => {\r\n              return o.parentId == 0;\r\n            });\r\n            console.log(this.menuLevelOneList);\r\n          } else {\r\n          }\r\n          this.dataListLoading = false;\r\n        });\r\n    },\r\n  },\r\n  //生命周期 - 创建完成（可以访问当前this实例）\r\n  created() {\r\n    this.token = this.$store.state.user.token;\r\n    this.getDataList();\r\n    this.getRoleList();\r\n  },\r\n  //生命周期 - 挂载完成（可以访问DOM元素）\r\n  mounted() {},\r\n  beforeCreate() {}, //生命周期 - 创建之前\r\n  beforeMount() {}, //生命周期 - 挂载之前\r\n  beforeUpdate() {}, //生命周期 - 更新之前\r\n  updated() {}, //生命周期 - 更新之后\r\n  beforeDestroy() {}, //生命周期 - 销毁之前\r\n  destroyed() {}, //生命周期 - 销毁完成\r\n  activated() {}, //如果页面有keep-alive缓存功能，这个函数会触发\r\n};\r\n</script>\r\n<style scoped>\r\n.role {\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n.grid-content {\r\n  margin-left: 30px;\r\n}\r\n.menu-info {\r\n  margin-left: 30px;\r\n}\r\n.button {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./controlAuthority.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./controlAuthority.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./controlAuthority.vue?vue&type=template&id=6bf6d3db&scoped=true&\"\nimport script from \"./controlAuthority.vue?vue&type=script&lang=js&\"\nexport * from \"./controlAuthority.vue?vue&type=script&lang=js&\"\nimport style0 from \"./controlAuthority.vue?vue&type=style&index=0&id=6bf6d3db&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6bf6d3db\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./controlAuthority.vue?vue&type=style&index=0&id=6bf6d3db&scoped=true&lang=css&\""],"sourceRoot":""}