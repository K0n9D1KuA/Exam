(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2163976a"],{"6aac":function(e,t,a){"use strict";a("ce5a")},7164:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"medium","label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"试卷名称",prop:"paparName"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入试卷名称",maxlength:100,"show-word-limit":"",clearable:""},model:{value:e.formData.paparName,callback:function(t){e.$set(e.formData,"paparName",t)},expression:"formData.paparName"}})],1),a("el-form-item",{attrs:{label:"总分",prop:"totalScore"}},[a("el-input-number",{attrs:{placeholder:"总分"},model:{value:e.formData.totalScore,callback:function(t){e.$set(e.formData,"totalScore",t)},expression:"formData.totalScore"}})],1),a("el-form-item",{attrs:{label:"总时间",prop:"totalTime"}},[a("el-input-number",{attrs:{placeholder:"总时间（单位分钟）"},model:{value:e.formData.totalTime,callback:function(t){e.$set(e.formData,"totalTime",t)},expression:"formData.totalTime"}})],1),a("el-form-item",{attrs:{label:"开始时间",prop:"beginTime"}},[a("el-date-picker",{style:{width:"100%"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间",clearable:""},model:{value:e.formData.beginTime,callback:function(t){e.$set(e.formData,"beginTime",t)},expression:"formData.beginTime"}})],1),a("el-form-item",{attrs:{label:"截止时间",prop:"endTime"}},[a("el-date-picker",{style:{width:"100%"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择截止时间",clearable:""},model:{value:e.formData.endTime,callback:function(t){e.$set(e.formData,"endTime",t)},expression:"formData.endTime"}})],1),a("el-form-item",{attrs:{label:"添加题目",prop:"endTime"}},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.showSubject()}}},[e._v("添加题目 ")]),a("span",{staticClass:"selectedScore"},[e._v("已选分数:"+e._s(e.selectedScore)+" 设置总分:"+e._s(e.formData.totalScore))])],1),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")]),a("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)]),a("el-col",{attrs:{span:11}},[a("div",{staticClass:"getPdf"},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.getPdf()}}},[e._v("导出样卷")])],1),a("div",{staticClass:"grid-contentbg-purple-light",attrs:{id:"pdfDom"}},[a("div",{staticClass:"top"},[a("div",[a("div",[e._v("-")]),a("div",[e._v("-")]),a("div",[e._v("-")]),a("div",[e._v("-")]),a("div",[e._v("-")]),a("div",[e._v("-")]),a("div",[e._v("-")])]),a("div",[a("div",[e._v("-")]),a("div",[e._v("-")]),a("div",[e._v("-")]),a("div",[e._v("-")]),a("div",[e._v("-")]),a("div",[e._v("-")]),a("div",[e._v("-")])])]),a("div",{staticClass:"showPaper"},[e._v("试卷预览")]),a("span",{staticClass:"title"},[e._v(e._s(e.formData.paparName))]),void 0!=e.formData.totalScore&&void 0!=e.formData.totalTime?a("div",{staticClass:"title-bottom"},[a("span",{staticClass:"ss"},[e._v("本试卷一共:"+e._s(e.selectedSubjects.length)+"道题，总分为:"+e._s(e.formData.totalScore)+"分,总共用时"+e._s(e.formData.totalTime)+"分钟")]),a("span",{staticClass:"ss"},[e._v("出题人:"+e._s(e.userInfo.memberName))])]):e._e(),a("div",[a("div",[e.judgmentSubjects.length>0?a("span",{staticClass:"subject-type"},[e._v("一、判断题")]):e._e(),e._l(e.judgmentSubjects,(function(t,s){return a("div",{key:s,staticClass:"subject",attrs:{index:s}},[a("div",{staticClass:"judgmentSubject-subjectName"},[a("div",{staticClass:"judgmentSubject-subjectName-left"},[e._v(" "+e._s(s+1)+" 、 "+e._s(t.subjectName)+" ")]),a("div",{staticClass:"judgmentSubject-subjectName-right"},[e._v("（ ）")])]),a("div",{staticClass:"selection"},[a("img",{staticClass:"subjectImage",attrs:{src:t.subjectImage}})])])}))],2),a("div",[e.singleSubjects.length>0?a("span",{staticClass:"subject-type"},[e._v("二、单选题")]):e._e(),e._l(e.singleSubjects,(function(t,s){return a("div",{key:s,staticClass:"subject",attrs:{index:s}},[a("span",{staticClass:"subjectName"},[e._v(e._s(s+1)+" 、 "+e._s(t.subjectName))]),a("div",{staticClass:"selection"},[a("div",[e._v(" A,"+e._s(t.aDescribtion)),a("br"),e._v(" B,"+e._s(t.bDescribtion)),a("br"),e._v(" C,"+e._s(t.cDescribtion)),a("br"),e._v(" D,"+e._s(t.dDescribtion)),a("br")]),a("img",{staticClass:"subjectImage",attrs:{src:t.subjectImage}})])])}))],2),a("div",[e.noSingleSubjects.length>0?a("span",{staticClass:"subject-type"},[e._v("三、多选题")]):e._e(),e._l(e.noSingleSubjects,(function(t,s){return a("div",{key:s,staticClass:"subject",attrs:{index:s}},[a("span",{staticClass:"subjectName"},[e._v(e._s(s+1)+" 、 "+e._s(t.subjectName))]),a("div",{staticClass:"selection"},[a("div",[e._v(" A,"+e._s(t.aDescribtion)),a("br"),e._v(" B,"+e._s(t.bDescribtion)),a("br"),e._v(" C,"+e._s(t.cDescribtion)),a("br"),e._v(" D,"+e._s(t.dDescribtion)),a("br")]),a("img",{staticClass:"subjectImage",attrs:{src:t.subjectImage}})])])}))],2),a("div",[e.completionSubjects.length>0?a("span",{staticClass:"subject-type"},[e._v("四，填空题")]):e._e(),e._l(e.completionSubjects,(function(t,s){return a("div",{key:s,staticClass:"subject",attrs:{index:s}},[a("div",{staticClass:"subjectName-completionSubject"},[a("div",[e._v(e._s(s+1)+" 、 "+e._s(t.subjectName)+" : _____")])]),a("div",{staticClass:"selection"},[a("img",{staticClass:"subjectImage",attrs:{src:t.subjectImage}})])])}))],2),a("div",[e.shortAnswerSubjects.length>0?a("span",{staticClass:"subject-type"},[e._v("五、简答题")]):e._e(),e._l(e.shortAnswerSubjects,(function(t,s){return a("div",{key:s,staticClass:"subject",attrs:{index:s}},[a("div",{staticClass:"subjectName-shortAnswerSubject"},[e._v(" "+e._s(s+1)+" 、 "+e._s(t.subjectName)+" ")]),a("div",{staticClass:"selection"},[a("img",{staticClass:"subjectImage-shortAnswerSubject",attrs:{src:t.subjectImage}})])])}))],2)])])])],1),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getDataList()}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"参数名",clearable:""},model:{value:e.dataForm.key,callback:function(t){e.$set(e.dataForm,"key",t)},expression:"dataForm.key"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"题目类型"},on:{change:function(t){return e.changeType(e.subjectType)}},model:{value:e.subjectType,callback:function(t){e.subjectType=t},expression:"subjectType"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{on:{click:function(t){return e.getDataList()}}},[e._v("查询")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList,border:""},on:{"selection-change":e.selectionChangeHandle}},[a("el-table-column",{attrs:{prop:"subjectName","header-align":"center",align:"center",label:"题目描述"}}),a("el-table-column",{attrs:{prop:"aDescribtion","header-align":"center",align:"center",label:"A选项描述"}}),a("el-table-column",{attrs:{prop:"bDescribtion","header-align":"center",align:"center",label:"B选项描述"}}),a("el-table-column",{attrs:{prop:"cDescribtion","header-align":"center",align:"center",label:"C选项描述"}}),a("el-table-column",{attrs:{prop:"dDescribtion","header-align":"center",align:"center",label:"D选项描述"}}),a("el-table-column",{attrs:{prop:"subjectImage","header-align":"center",align:"center",label:"题目图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"80px"},attrs:{src:e.row.subjectImage}})]}}])}),a("el-table-column",{attrs:{prop:"subjectType",label:"题目类型",width:"100","filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"disable-transitions":""}},[e._v(e._s(t.row.subjectType))])]}}])}),a("el-table-column",{attrs:{prop:"subjectAnwser","header-align":"center",align:"center",label:"题目答案"}}),a("el-table-column",{attrs:{prop:"catagoryId","header-align":"center",align:"center",label:"所关联章节id"}}),a("el-table-column",{attrs:{prop:"score","header-align":"center",align:"center",label:"题目分数"}}),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",disabled:-1!=e.selectedSubjects.indexOf(t.row.id)},on:{click:function(a){return e.addSubject(t.row)}}},[e._v("添加 ")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)],1)},i=[],n=(a("99af"),a("d81d"),{components:{},data:function(){return{dataForm:{key:""},dataListLoading:!1,dataListSelections:[],pageIndex:1,pageSize:10,totalPage:0,dataList:[],dialogVisible:!1,formData:{paparName:void 0,totalScore:void 0,totalTime:void 0,beginTime:void 0,endTime:void 0},rules:{paparName:[{required:!0,message:"请输入试卷名称",trigger:"blur"}],totalScore:[{required:!0,message:"总分",trigger:"blur"}],totalTime:[{required:!0,message:"总时间（单位分钟）",trigger:"blur"}],beginTime:[{required:!0,message:"请选择开始时间",trigger:"change"}],endTime:[{required:!0,message:"请选择截止时间",trigger:"change"}]},singleSubjects:[],noSingleSubjects:[],completionSubjects:[],judgmentSubjects:[],shortAnswerSubjects:[],selectedSubjects:[],selectedScore:0,token:this.$store.state.user.token,htmlTitle:"试卷预览",userInfo:this.$store.state.user.userInfo,options:[{value:6,label:"全部"},{value:0,label:"单选题"},{value:1,label:"多选题"},{value:3,label:"判断题"},{value:2,label:"填空题"},{value:4,label:"简答题"}],subjectType:6}},computed:{},watch:{selectedScore:{handler:function(e,t){e>=this.formData.totalScore&&void 0!=this.formData.totalScore&&this.$message({message:"目前添加题目总分:".concat(this.selectedScore,",已经超过预设总分").concat(this.formData.totalScore,",请及时调整题目数量！"),type:"warning"})},deep:!0}},methods:{changeType:function(e){console.log(e),this.getDataList()},addSubject:function(e){this.selectedScore+=e.score,this.selectedSubjects.push(e.id),console.log(this.selectedSubjects),"单选题"===e.subjectType&&this.singleSubjects.push(e),"多选题"===e.subjectType&&this.noSingleSubjects.push(e),"填空题"===e.subjectType&&this.completionSubjects.push(e),"判断题"===e.subjectType&&this.judgmentSubjects.push(e),"简答题"===e.subjectType&&this.shortAnswerSubjects.push(e),console.log(this.singleSubjects)},selectionChangeHandle:function(e){this.dataListSelections=e},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},submitForm:function(){var e=this;this.$refs["elForm"].validate((function(t){t&&e.$http.post("/courseSystem/paper/addPaper",{paperName:e.formData.paparName,beginTime:e.formData.beginTime,endTime:e.formData.endTime,totalTime:e.formData.totalTime,totalScore:e.formData.totalScore,selectedSubjects:e.selectedSubjects},{headers:{token:e.token}}).then((function(t){t.data;e.$message({message:"添加试卷成功",type:"success",duration:1500}),e.resetForm()}))}))},resetForm:function(){this.formData={},this.singleSubjects=[],this.noSingleSubjects=[],this.completionSubjects=[],this.judgmentSubjects=[],this.shortAnswerSubjects=[],this.selectedSubjects=[],this.selectedScore=0},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()},showSubject:function(){this.dialogVisible=!0,this.getDataList()},getDataList:function(){var e=this;this.dataListLoading=!0,this.$http.get("courseSystem/subject/list",{params:{page:this.pageIndex,pageSize:this.pageSize,key:this.dataForm.key,subjectType:this.subjectType},headers:{token:this.token}}).then((function(t){var a=t.data;a&&0===a.code?(e.dataList=a.page.list,e.dataList.map((function(e){1==e.subjectType?e.subjectType="多选题":0==e.subjectType?e.subjectType="单选题":2==e.subjectType?e.subjectType="填空题":3==e.subjectType?e.subjectType="判断题":4==e.subjectType&&(e.subjectType="简答题")})),e.totalPage=a.page.totalCount):(e.dataList=[],e.totalPage=0),e.dataListLoading=!1}))}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}}),l=n,o=(a("6aac"),a("2877")),r=Object(o["a"])(l,s,i,!1,null,"05338a10",null);t["default"]=r.exports},"99af":function(e,t,a){"use strict";var s=a("23e7"),i=a("da84"),n=a("d039"),l=a("e8b5"),o=a("861d"),r=a("7b0b"),c=a("07fa"),u=a("8418"),d=a("65f0"),b=a("1dde"),m=a("b622"),p=a("2d00"),g=m("isConcatSpreadable"),f=9007199254740991,v="Maximum allowed index exceeded",h=i.TypeError,j=p>=51||!n((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),_=b("concat"),y=function(e){if(!o(e))return!1;var t=e[g];return void 0!==t?!!t:l(e)},S=!j||!_;s({target:"Array",proto:!0,forced:S},{concat:function(e){var t,a,s,i,n,l=r(this),o=d(l,0),b=0;for(t=-1,s=arguments.length;t<s;t++)if(n=-1===t?l:arguments[t],y(n)){if(i=c(n),b+i>f)throw h(v);for(a=0;a<i;a++,b++)a in n&&u(o,b,n[a])}else{if(b>=f)throw h(v);u(o,b++,n)}return o.length=b,o}})},ce5a:function(e,t,a){}}]);
//# sourceMappingURL=chunk-2163976a.59fa5f68.js.map